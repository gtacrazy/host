!function(t,s,n,e){t.fn.waltzer=function(s){function n(i,s){this.options=t.extend({},o,s),this.coreValues(i),this.utilities(this),this.actions(this),this.init(this)}var o={vertical:!1,scroll:1,offset:0,circular:!0,auto:!0,autoPause:3500,speed:300,easing:"swing",navBtns:!0,leftNavBtn:"left-nav-btn",rightNavBtn:"right-nav-btn"};return n.prototype.coreValues=function(s){if(this.$container=s,this.$items=this.$container.children().not("."+this.options.leftNavBtn+", ."+this.options.rightNavBtn),this.options.navBtns&&(t('<div class="'+this.options.leftNavBtn+'"></div>').appendTo(this.$container),t('<div class="'+this.options.rightNavBtn+'"></div>').appendTo(this.$container),this.$buttons=this.$container.find("."+this.options.leftNavBtn+", ."+this.options.rightNavBtn)),this.itemCount=this.$items.length,this.options.vertical?(this.containerWidth=this.$container.outerHeight(!1),this.itemWidth=this.$items.outerHeight(!0),this.itemMarginWidth=this.itemWidth-this.$items.outerHeight(!1),this.containerHeight=this.containerWidth):(this.containerWidth=this.$container.outerWidth(!1),this.itemWidth=this.$items.outerWidth(!0),this.itemMarginWidth=this.itemWidth-this.$items.outerWidth(!1),this.containerHeight=this.$items.outerHeight(!1)),this.innerWrapperWidth=this.itemWidth*this.itemCount,this.innerWrapperPos=0,this.speed=this.options.scroll*this.options.speed,this.scrollWidth=this.itemWidth*this.options.scroll,this.pageCount=1,this.itemCount%this.options.scroll!=0||this.containerWidth/this.itemWidth+1<this.options.scroll)for(i=this.options.scroll-1;i>=1;i--)if(this.itemCount%i==0&&this.containerWidth/this.itemWidth+1>i){this.options.scroll=i;break}},n.prototype.utilities=function(t){this.cutAndPaste=function(t){if("forward"==t)for(i=0;i<this.options.scroll;i++)this.innerWrapper.append(this.$items[i]);else if("backward"==t)for(i=this.itemCount;i>=this.itemCount-this.options.scroll;i--)this.innerWrapper.prepend(this.$items[i])},this.refreshItemList=function(){return this.$items=this.innerWrapper.children("div.item")},this.updatePageCount=function(t,s){for(s=s==e||0==s?1:s,i=0;i<s;i++)"forward"==t?this.pageCount<this.itemCount/this.options.scroll?this.pageCount++:this.pageCount=1:(t="backward")&&(this.pageCount>1?this.pageCount--:this.pageCount=this.itemCount/this.options.scroll)},this.addAuto=function(){return this.options.auto?setInterval(function(){t.move("forward")},this.options.autoPause):!1},this.removeAuto=function(){return this.options.auto?clearInterval(t.autoScroll):!1},this.eventTrigger=function(s){if("string"==typeof s)t.$container.trigger(s);else for(i=0;i<s.length;i++)t.$container.trigger(s[i])},this.animateFunction=function(i,s,n){this.innerWrapper.animate(i,this.speed,this.easing,function(){t.updatePageCount(s,n),t.directionCallBack.resolve(s),t.completeCallBack.resolve("completed"),t.eventTrigger([s+"Complete","moved"])})}},n.prototype.actions=function(i){this.animate=function(i,s){if(this.innerWrapper.is(":animated"))return!1;var n={},o=1==this.options.vertical?"top":"left",s=s==e||0==s?1:s,r=this.scrollWidth*s;if(this.directionCallBack=t.Deferred(),this.completeCallBack=t.Deferred(),n[o]="forward"==i?"-="+r:"+="+r,this.eventTrigger(i),"forward"==i)this.innerWrapperWidth+this.innerWrapperPos[o]>this.containerWidth+this.itemWidth?this.animateFunction(n,i,s):this.options.circular?(this.cutAndPaste("forward"),this.innerWrapper.css(o,this.innerWrapperPos[o]+this.scrollWidth),this.animateFunction(n,i,s),this.refreshItemList()):this.options.circular||(n[o]=0,this.animateFunction(n,i,s));else if("backward"==i)if(this.innerWrapperPos[o]<0)this.animateFunction(n,i,s);else if(this.options.circular)this.cutAndPaste("backward"),this.innerWrapper.css(o,this.innerWrapperPos[o]-this.scrollWidth),this.animateFunction(n,i,s),this.refreshItemList();else if(!this.options.circular){if(this.scrollWidth<this.containerWidth){for(var h=this.containerWidth;h>0;)h-=this.itemWidth;n[o]=-1*(this.innerWrapperWidth-this.containerWidth+h)}else n[o]=-1*(this.innerWrapperWidth-this.scrollWidth);this.animateFunction(n,i,s)}this.initCallBacks(this.directionCallBack,this.completeCallBack)},this.initCallBacks=function(t,s){(i.options.onForwardComplete||i.options.onBackwardComplete)&&t.done(function(t){"forward"==t?"function"==typeof i.options.onForwardComplete&&i.options.onForwardComplete.call(i):"backward"==t&&"function"==typeof i.options.onBackwardComplete&&i.options.onBackwardComplete.call(i)}),"function"==typeof i.options.onComplete&&s.done(function(t){i.options.onComplete.call(i)})}},n.prototype.init=function(s){if(this.options.vertical?this.$items.wrapAll('<div class="innerWrapper" style="position:relative; height:'+this.innerWrapperWidth+'px;"></div>'):this.$items.wrapAll('<div class="innerWrapper" style="position:relative; width:'+this.innerWrapperWidth+'px;"></div>'),this.innerWrapper=this.$container.children("div.innerWrapper"),this.innerWrapper.wrap('<div class="mask" style="position:relative; overflow:hidden; width:100%; height:'+this.containerHeight+'px;"></div>'),0!=this.options.offset){for(i=0;i<this.options.offset;i++)this.innerWrapper.append(this.$items[i]);this.refreshItemList()}this.options.onCreate&&"function"==typeof this.options.onCreate&&this.options.onCreate.call(this),this.options.auto&&(this.autoScroll=this.addAuto()),this.options.navBtns&&this.$buttons.on("click",function(){t(this).attr("class")==s.options.leftNavBtn?s.move("backward"):t(this).attr("class")==s.options.rightNavBtn&&s.move("forward")}),this.options.auto&&this.$container.on({mouseover:function(){return s.removeAuto()},mouseout:function(){return s.autoScroll=s.addAuto()}})},n.prototype.destroy=function(t){this.$container.find(".mask").after(this.$items).remove(),this.options.navBtns&&this.$buttons.off()},n.prototype.move=function(t,i){this.innerWrapperPos=this.innerWrapper.position(),this.animate(t,i)},this.each(function(){"string"==typeof s?($this=t(this).data("plugin_waltzerJS"),"forward"==s||"backward"==s?$this.move.call($this,s):"stop"==s?$this.removeAuto():"start"==s?$this.autoScroll=$this.addAuto():"destroy"==s&&$this[s].call($this)):t.data(t(this),"plugin_waltzerJS")||t(this).data("plugin_waltzerJS",new n(t(this),s))}),this}}(jQuery,window,document);